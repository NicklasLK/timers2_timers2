<!doctype html>
<html lang="en" data-bs-theme="light">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Timers{% block title %}{% endblock %}</title>
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
        rel="stylesheet"
        integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM"
        crossorigin="anonymous"
        referrerpolicy="no-referrer">
    <link
        href="https://cdn.datatables.net/1.12.1/css/dataTables.bootstrap5.min.css"
        rel="stylesheet"
        integrity="sha384-V05SibXwq2x9UKqEnsL0EnGlGPdbHwwdJdMjmp/lw3ruUri9L34ioOghMTZ8IHiI"
        crossorigin="anonymous"
        referrerpolicy="no-referrer">
    
    <style>
      /* Dark mode base styles */
      [data-bs-theme="dark"] {
        color-scheme: dark;
      }
      
      [data-bs-theme="dark"] body {
        background-color: #212529;
        color: #dee2e6;
      }
      
      /* Toned down table row colors for light mode */
      .table-success {
        --bs-table-bg: #d4edda;
        --bs-table-color: #155724;
      }
      
      .table-danger {
        --bs-table-bg: #f8d7da;
        --bs-table-color: #721c24;
      }
      
      .table-warning {
        --bs-table-bg: #fff3cd;
        --bs-table-color: #856404;
      }
      
      .table-info {
        --bs-table-bg: #d1ecf1;
        --bs-table-color: #0c5460;
      }
      
      .table-secondary {
        --bs-table-bg: #e2e3e5;
        --bs-table-color: #383d41;
      }
      
      /* Toned down table row colors for dark mode */
      [data-bs-theme="dark"] .table-success {
        --bs-table-bg: #1a3a26;
        --bs-table-color: #8fd9a8;
      }
      
      [data-bs-theme="dark"] .table-danger {
        --bs-table-bg: #3d1f23;
        --bs-table-color: #ea868f;
      }
      
      [data-bs-theme="dark"] .table-warning {
        --bs-table-bg: #3d3420;
        --bs-table-color: #f0d495;
      }
      
      [data-bs-theme="dark"] .table-info {
        --bs-table-bg: #1f3439;
        --bs-table-color: #86cfda;
      }
      
      [data-bs-theme="dark"] .table-secondary {
        --bs-table-bg: #2d3035;
        --bs-table-color: #b0b5ba;
      }
      
      /* Links in tables */
      [data-bs-theme="dark"] .table a {
        color: #6ea8fe;
      }
      
      [data-bs-theme="dark"] .table a:hover {
        color: #9ec5fe;
      }
      
      /* Dark mode styles for DataTables */
      [data-bs-theme="dark"] .dataTables_wrapper .dataTables_length,
      [data-bs-theme="dark"] .dataTables_wrapper .dataTables_filter,
      [data-bs-theme="dark"] .dataTables_wrapper .dataTables_info,
      [data-bs-theme="dark"] .dataTables_wrapper .dataTables_paginate {
        color: #dee2e6;
      }
      
      [data-bs-theme="dark"] .dataTables_wrapper .dataTables_filter input,
      [data-bs-theme="dark"] .dataTables_wrapper .dataTables_length select {
        background-color: #343a40;
        color: #dee2e6;
        border-color: #495057;
      }
      
      [data-bs-theme="dark"] table.dataTable thead th,
      [data-bs-theme="dark"] table.dataTable thead td {
        border-bottom: 1px solid #495057;
      }
      
      [data-bs-theme="dark"] table.dataTable tbody tr {
        background-color: #2b3035;
      }
      
      [data-bs-theme="dark"] table.dataTable.table-striped > tbody > tr:nth-of-type(odd) > * {
        background-color: rgba(255, 255, 255, 0.05);
      }
      
      [data-bs-theme="dark"] .dataTables_wrapper .dataTables_paginate .paginate_button {
        color: #dee2e6 !important;
      }
      
      [data-bs-theme="dark"] .dataTables_wrapper .dataTables_paginate .paginate_button.disabled {
        color: #6c757d !important;
      }
      
      /* Theme toggle button */
      .theme-toggle {
        cursor: pointer;
        font-size: 1.2rem;
        padding: 0.5rem;
        background: none;
        border: none;
        color: inherit;
      }
      
      .theme-toggle:hover {
        opacity: 0.7;
      }
    </style>

    {% block head %}
    {% endblock %}
  </head>
  <body>
      <nav class="navbar navbar-expand-lg" data-bs-theme-nav>
          <div class="container-fluid">
              <a class="navbar-brand" href="{{ url_for("index") }}">Timers2</a>
              <button
                  class="navbar-toggler"
                  type="button"
                  data-bs-toggle="collapse"
                  data-bs-target="#navbarSupportedContent"
                  aria-controls="navbarSupportedContent"
                  aria-expanded="false"
                  aria-label="Toggle navigation">
                  <span class="navbar-toggler-icon"></span>
              </button>
              <div class="collapse navbar-collapse"
                   id="navbarSupportedContent">
                  <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                      <li class="nav-item">
                          <a class="nav-link"
                             aria-current="page"
                             href="{{ url_for("add_timer") }}">Add timer</a>
                      </li>
                      <li class="nav-item">
                          <a class="nav-link"
                             aria-current="page"
                             href="{{ url_for("standings") }}">Standings</a>
                      </li>
                  </ul>
                  <button class="theme-toggle" id="themeToggle" title="Toggle dark mode">
                      <span id="themeIcon">üåô</span>
                  </button>
              </div>
          </div>
      </nav>

      {% block body %}
      <main role="main" class="flex-shrink-0 pt-2">
          <div class="container">
              {% block content %}
              {% endblock %}
          </div>
      </main>
      {% endblock %}

      <script
          src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
          crossorigin="anonymous"
          referrerpolicy="no-referrer">
      </script>
      <script
          src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
          integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
          crossorigin="anonymous"
          referrerpolicy="no-referrer">
      </script>
      <script
          src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"
          integrity="sha384-ZuLbSl+Zt/ry1/xGxjZPkp9P5MEDotJcsuoHT0cM8oWr+e1Ide//SZLebdVrzb2X"
          crossorigin="anonymous"
          referrerpolicy="no-referrer">
      </script>
      <script
          src="https://cdn.datatables.net/1.12.1/js/dataTables.bootstrap5.min.js"
          integrity="sha384-jIAE3P7Re8BgMkT0XOtfQ6lzZgbDw/02WeRMJvXK3WMHBNynEx5xofqia1OHuGh0"
          crossorigin="anonymous"
          referrerpolicy="no-referrer">
      </script>
      
      <script>
        // Theme toggle functionality
        (function() {
          const themeToggle = document.getElementById('themeToggle');
          const themeIcon = document.getElementById('themeIcon');
          const htmlElement = document.documentElement;
          const navbar = document.querySelector('[data-bs-theme-nav]');
          
          // Load saved theme or default to light
          const savedTheme = localStorage.getItem('theme') || 'light';
          setTheme(savedTheme);
          
          function setTheme(theme) {
            htmlElement.setAttribute('data-bs-theme', theme);
            
            // Update navbar classes
            if (theme === 'dark') {
              navbar.classList.remove('bg-light');
              navbar.classList.add('navbar-dark', 'bg-dark');
              themeIcon.textContent = '‚òÄÔ∏è';
            } else {
              navbar.classList.remove('navbar-dark', 'bg-dark');
              navbar.classList.add('bg-light');
              themeIcon.textContent = 'üåô';
            }
            
            localStorage.setItem('theme', theme);
          }
          
          themeToggle.addEventListener('click', function() {
            const currentTheme = htmlElement.getAttribute('data-bs-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            setTheme(newTheme);
          });
        })();
      </script>
      
      {% block scripts %}
      {% endblock %}
  </body>
</html>
